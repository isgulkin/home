В Linux, механизмы **namespaces** и **cgroups** играют ключевую роль в контейнеризации, позволяя изолировать и
ограничивать ресурсы для процессов.

### Namespaces

Namespaces предоставляют изоляцию для группы процессов, так что процессы в одном namespace не видят ресурсы в другом. В
Linux поддерживается несколько типов namespaces【11†source】【12†source】【13†source】:

- **mnt (Mount)**: Изолирует точки монтирования и файловые системы.
- **pid (Process ID)**: Изолирует идентификаторы запущенных процессов и информацию о них.
- **net (Network)**: Изолирует сетевой стек, доступные интерфейсы, возможность получения и отправки информации, создания
  сокетов.
- **ipc (Interprocess Communication)**: Изолирует межпроцессное взаимодействие и доступные каналы.
- **uts (UNIX Time-sharing System)**: Изолирует идентификацию системы в сети, включая имя хоста.
- **user**: Изолирует идентификаторы пользователей и групп, используемые для контроля доступа к ресурсам.
- **cgroup**: Транслирует группы управления ресурсами внутрь изолированного окружения.
- **time**: Транслирует виртуальное время для процесса.

### Cgroups

Cgroups позволяют ограничивать, учитывать и изолировать использование ресурсов процессов и групп процессов. Они
обеспечивают тонкий контроль над ресурсами, такими как CPU, память и ввод-вывод. Контроллеры cgroups
включают【13†source】:

- **cpu**: Разделение процессорного времени.
- **cpuset**: Привязка процессов к определенным CPU или узлам памяти.
- **memory**: Ограничение использования памяти.
- **devices**: Доступ к устройствам.
- **freezer**: Приостановка и возобновление выполнения группы процессов.
- **net_cls** и **net_prio**: Настройки сетевого трафика и приоритетов.
- **blkio**: Ограничения ввода-вывода.
- **hugetlb**: Использование huge pages.
- **pids**: Ограничение количества процессов.
- **rdma**: Ограничение по каналам прямого доступа к памяти.

Дополнительно, **cpuacct** используется для учета использования CPU, а **perf_event** для мониторинга производительности
группы.

Таким образом, с помощью namespaces и cgroups, Linux предоставляет мощные инструменты для создания изолированных и
ограниченных по ресурсам сред, что лежит в основе технологии контейнеризации.

| Особенность                    | `k3s`                                                                                                      | `k8s`                                                                                                  |
|--------------------------------|------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| **Размер и ресурсы**           | Легковесный, оптимизирован для работы на оборудовании с ограниченными ресурсами                            | Требует больше ресурсов, оптимизирован для масштабируемых и высоконагруженных сред                     |
| **Установка и настройка**      | Простая установка и настройка, идеально подходит для разработки, тестирования и малых продакшн сред        | Более сложная настройка, требует глубоких знаний для оптимизации и настройки                           |
| **Интегрированные компоненты** | Поставляется с интегрированными компонентами (например, SQLite вместо etcd, встроенный ingress контроллер) | Требует ручной настройки и установки дополнительных компонентов                                        |
| **Совместимость с API**        | Совместимость с большинством API Kubernetes, но с некоторыми ограничениями                                 | Полная совместимость с Kubernetes API                                                                  |
| **Масштабируемость**           | Поддерживает до 500 узлов                                                                                  | Может масштабироваться до тысяч узлов                                                                  |
| **Целевое использование**      | Идеально подходит для Edge computing, малых и средних проектов, разработки и тестирования                  | Разработан для предприятий и масштабируемых проектов с высокими требованиями к надежности и управлению |
| **Обновления**                 | Простое обновление через одну команду                                                                      | Обновления могут потребовать сложной миграции и ручной настройки                                       |
| **Управление ресурсами**       | Включает упрощенное управление ресурсами и автоматизацию                                                   | Предлагает более сложные инструменты для детального управления ресурсами и мониторинга                 |